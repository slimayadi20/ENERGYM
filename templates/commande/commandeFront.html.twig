{% extends "base-front.html.twig" %}

{% block title %}
    Commandes!
{% endblock %}

{% block body %}
    {{ include('front_office/navbar.html.twig') }}
    <section class="page-title" style="background-image:url(https://via.placeholder.com/1920x600)">
        <div class="auto-container">
            <div class="clearfix">
                <div class="pull-left">
                    <h2>Vos Commandes</h2>
                    <div class="text">Fitness is not a destination it is a way of life.</div>
                </div>
                <div class="pull-right">
                    <ul class="page-breadcrumb">
                        <li><a href="index.html">home</a></li>
                        <li>Commandes</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>
    <table class="table" id="tblData" width="100%" cellspacing="0">



        <br>


        <tbody>


        <tr>

            <div class="container px-1 px-md-3 py-1 mx-auto">
                {% set j = 0 %}
                {% for c in commandes %}


                        {% set i = i+1 %}


                <div class="card">
                    <div class="row d-flex justify-content-between px-3 top">
                        <div class="d-flex">
                            <h5>COMMANDE <span name="id" class="text-primary font-weight-bold">#{{ c.id }}</span></h5>
                        </div>
                        <div class="d-flex flex-column text-sm-right">


                        </div>
                            <a name="delete"  href="{{ path('deleteCommande', {'id': c.id}) }}" type="submit" class="btn btn-red ">Supprimer</a>
                    </div> <!-- Add class 'active' to progress -->
                    <div class="row d-flex justify-content-center">
                        <div class="col-12">

                            <ul id="progressbar" class="text-center">
                                <li id="T{{i}}" class=" step0"></li>
                                <li id="E{{i}}" class=" step0"></li>
                                <li id="R{{i}}" class=" step0"></li>
                                <li id="A{{i}}" class="step0"></li>

                            </ul>
                            {% for l in attribute(livraisons,j) %}
                        {% set j = j+1 %}


                              {% if l.etat == "Traitée" %}
                            <script>
                                document.getElementById('T{{i}}').classList.add('active');
                            </script>
                            {% endif %}

                            {% if l.etat == "Expédiée" %}
                            <script>
                                document.getElementById('T{{i}}').classList.add('active');
                                document.getElementById('E{{i}}').classList.add('active');
                            </script>
                            {% endif %}
                            {% if l.etat == "En Route" %}
                            <script>
                                document.getElementById('T{{i}}').classList.add('active');
                                document.getElementById('E{{i}}').classList.add('active');
                                document.getElementById('R{{i}}').classList.add('active');
                            </script>
                            {% endif %}
                            {% if l.etat == "Arrivée" %}
                            <script>
                                document.getElementById('T{{i}}').classList.add('active');
                                document.getElementById('E{{i}}').classList.add('active');
                                document.getElementById('R{{i}}').classList.add('active');
                                document.getElementById('A{{i}}').classList.add('active');
                            </script>
                            {% endif %}
                    {% endfor %}
                            <script>
                                console.log({{i}})
                            </script>
                        </div>
                    </div>
                    <div class="row justify-content-between top">
                        <div class="row d-flex icon-content"> <img class="icon" src="{{ asset('front-office/images/etats/t.png') }}">
                            <div class="d-flex flex-column">
                                <p class="font-weight-bold">Commande<br>Traitée</p>
                            </div>
                        </div>
                        <div class="row d-flex icon-content"> <img class="icon" src="{{ asset('front-office/images/etats/e.png') }}">
                            <div class="d-flex flex-column">
                                <p class="font-weight-bold">Commande<br>Expédiée</p>
                            </div>
                        </div>
                        <div class="row d-flex icon-content"> <img class="icon" src="{{ asset('front-office/images/etats/r.png') }}">
                            <div class="d-flex flex-column">
                                <p class="font-weight-bold">Commande<br>En Route</p>
                            </div>
                        </div>
                        <div class="row d-flex icon-content"> <img class="icon" src="{{ asset('front-office/images/etats/a.png') }}">
                            <div class="d-flex flex-column">
                                <p class="font-weight-bold">Commande<br>Arrivée</p>
                            </div>
                        </div>

                    </div>
                </div>

                {% endfor %}
            </div>


        </tbody>
    </table>



    {{ include('front_office/footer.html.twig') }}
{% endblock %}